`Ctrl``k`

GitBook AssistantAsk

ProductResourcesGitHubStart free

More

  * Documentation
  * Learn
  * ZenML Pro
  * Stacks
  * API Reference
  * SDK Reference
  * Changelog



GitBook Assistant

GitBook Assistant

Working...Thinking...

GitBook Assistant

##### Good evening

I'm here to help you with the docs.

What is this page about?What should I read next?Can you give an example?

`Ctrl``i`

AI Based on your context

Send

  * Getting Started

    * Welcome to ZenML
    * Installation
    * Hello World
    * Your First AI Pipeline
    * Core Concepts
    * System Architecture
  * Deploying ZenML

    * Deploy

      * Deploy with Docker
      * Deploy with Helm
      * Deploy using HuggingFace Spaces
      * Deploy with custom images
      * Secret management
      * Custom secret stores

    * Connect
    * Manage
  * Concepts

    * Steps & Pipelines
    * Artifacts
    * Stack & Components
    * Service Connectors
    * Pipeline Snapshots
    * Pipeline Deployments
    * Containerization
    * Code Repositories
    * Secrets
    * Environment Variables
    * Tags
    * Metadata
    * Models
    * Dashboard
    * Templates
  * Reference

    * Community & content
    * Environment Variables
    * MCP Docs & llms.txt
    * FAQ
    * Global settings
    * Legacy docs



Powered by GitBook

On this page

Was this helpful?

GitBook AssistantAsk

  1. Deploying ZenML
  2. Deploy



# Custom secret stores

Learning how to develop a custom secret store.

The secrets store acts as the one-stop shop for all the secrets to which your pipeline or stack components might need access. It is responsible for storing, updating and deleting _only the secrets values_ for ZenML secrets, while the ZenML secret metadata is stored in the SQL database. The secrets store interface implemented by all available secrets store back-ends is defined in the `zenml.zen_stores.secrets_stores.secrets_store_interface` core module and looks more or less like this:

Copy```
from abc import ABC, abstractmethod
from typing import Dict
from uuid import UUID
classSecretsStoreInterface(ABC):
"""ZenML secrets store interface.
  All ZenML secrets stores must implement the methods in this interface.
  """
# ---------------------------------
# Initialization and configuration
# ---------------------------------
@abstractmethod
def_initialize(self) ->None:
"""Initialize the secrets store.
    This method is called immediately after the secrets store is created.
    It should be used to set up the backend (database, connection etc.).
    """
# ---------
# Secrets
# ---------
@abstractmethod
defstore_secret_values(
self,
secret_id: UUID,
secret_values: Dict[str,str],
  ) ->None:
"""Store secret values for a new secret.
    Args:
      secret_id: ID of the secret.
      secret_values: Values for the secret.
    """
@abstractmethod
defget_secret_values(self,secret_id: UUID) -> Dict[str,str]:
"""Get the secret values for an existing secret.
    Args:
      secret_id: ID of the secret.
    Returns:
      The secret values.
    Raises:
      KeyError: if no secret values for the given ID are stored in the
        secrets store.
    """
@abstractmethod
defupdate_secret_values(
self,
secret_id: UUID,
secret_values: Dict[str,str],
  ) ->None:
"""Updates secret values for an existing secret.
    Args:
      secret_id: The ID of the secret to be updated.
      secret_values: The new secret values.
    Raises:
      KeyError: if no secret values for the given ID are stored in the
        secrets store.
    """
@abstractmethod
defdelete_secret_values(self,secret_id: UUID) ->None:
"""Deletes secret values for an existing secret.
    Args:
      secret_id: The ID of the secret.
    Raises:
      KeyError: if no secret values for the given ID are stored in the
        secrets store.
    """
```


This is a slimmed-down version of the real interface which aims to highlight the abstraction layer. In order to see the full definition and get the complete docstrings, please check the SDK docs .

## 

Build your own custom secrets store

If you want to create your own custom secrets store implementation, you can follow the following steps:

  1. Create a class that inherits from the `zenml.zen_stores.secrets_stores.base_secrets_store.BaseSecretsStore` base class and implements the `abstractmethod`s shown in the interface above. Use `SecretsStoreType.CUSTOM` as the `TYPE` value for your secrets store class.

  2. If you need to provide any configuration, create a class that inherits from the `SecretsStoreConfiguration` class and add your configuration parameters there. Use that as the `CONFIG_TYPE` value for your secrets store class.

  3. To configure the ZenML server to use your custom secrets store, make sure your code is available in the container image that is used to run the ZenML server. Then, use environment variables or helm chart values to configure the ZenML server to use your custom secrets store, as covered in the deployment guide.




PreviousSecret managementNextConnect

Last updated 5 months ago

Was this helpful?
