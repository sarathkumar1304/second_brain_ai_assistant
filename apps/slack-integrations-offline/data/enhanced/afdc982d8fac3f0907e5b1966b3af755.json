{
    "id": "afdc982d8fac3f0907e5b1966b3af755",
    "metadata": {
        "id": "afdc982d8fac3f0907e5b1966b3af755",
        "url": "https://docs.zenml.io/concepts/code-repositories",
        "title": "Code Repositories | ZenML - Bridging the gap between ML & Ops",
        "properties": {
            "description": "Tracking your code and avoiding unnecessary Docker builds by connecting your git repo.",
            "keywords": null,
            "author": null,
            "og:title": "Code Repositories | ZenML - Bridging the gap between ML & Ops",
            "og:description": "Tracking your code and avoiding unnecessary Docker builds by connecting your git repo.",
            "og:image": "https://docs.zenml.io/~gitbook/ogimage/I8b1fPTVmUA6hcVsw6iS",
            "twitter:card": "summary_large_image",
            "twitter:title": "Code Repositories | ZenML - Bridging the gap between ML & Ops",
            "twitter:description": "Tracking your code and avoiding unnecessary Docker builds by connecting your git repo.",
            "twitter:image": "https://docs.zenml.io/~gitbook/ogimage/I8b1fPTVmUA6hcVsw6iS"
        }
    },
    "content": "`Ctrl``k`\n\nGitBook AssistantAsk\n\nProductResourcesGitHubStart free\n\nMore\n\n  * Documentation\n  * Learn\n  * ZenML Pro\n  * Stacks\n  * API Reference\n  * SDK Reference\n  * Changelog\n\n\n\nGitBook Assistant\n\nGitBook Assistant\n\nWorking...Thinking...\n\nGitBook Assistant\n\n##### Good evening\n\nI'm here to help you with the docs.\n\nWhat is this page about?What should I read next?Can you give an example?\n\n`Ctrl``i`\n\nAI Based on your context\n\nSend\n\n  * Getting Started\n\n    * Welcome to ZenML\n    * Installation\n    * Hello World\n    * Your First AI Pipeline\n    * Core Concepts\n    * System Architecture\n  * Deploying ZenML\n\n    * Deploy\n    * Connect\n    * Manage\n  * Concepts\n\n    * Steps & Pipelines\n    * Artifacts\n    * Stack & Components\n    * Service Connectors\n    * Pipeline Snapshots\n    * Pipeline Deployments\n    * Containerization\n    * Code Repositories\n    * Secrets\n    * Environment Variables\n    * Tags\n    * Metadata\n    * Models\n    * Dashboard\n    * Templates\n  * Reference\n\n    * Community & content\n    * Environment Variables\n    * MCP Docs & llms.txt\n    * FAQ\n    * Global settings\n    * Legacy docs\n\n\n\nPowered by GitBook\n\nOn this page\n\n  * Registering a code repository\n  * Available implementations\n  * GitHub\n  * GitLab\n  * Developing a custom code repository\n\n\n\nWas this helpful?\n\nGitBook AssistantAsk\n\n  1. Concepts\n\n\n\n# Code Repositories\n\nTracking your code and avoiding unnecessary Docker builds by connecting your git repo.\n\nA code repository in ZenML refers to a remote storage location for your code. Some commonly known code repository platforms include GitHub and GitLab.\n\nA visual representation of how the code repository fits into the general ZenML architecture.\n\nConnecting code repositories to ZenML solves two fundamental challenges in machine learning workflows. First, it enhances reproducibility by tracking which specific code version (commit hash) was used for each pipeline run, creating a clear audit trail between your code and its results. Second, it dramatically improves development efficiency by optimizing Docker image building. Instead of including source code in each build, ZenML builds images without the code and downloads it at runtime, eliminating the need to rebuild images after every code change. This not only speeds up individual development cycles but allows team members to share and reuse builds, saving time and computing resources across your organization.\n\nLearn more about how code repositories optimize Docker builds here.\n\n## \n\nRegistering a code repository\n\nIf you are planning to use one of the available implementations of code repositories, first, you need to install the corresponding ZenML integration:\n\nCopy```\nzenml integration install <INTEGRATION_NAME>\n```\n\n\nAfterward, code repositories can be registered using the CLI:\n\nCopy```\nzenml code-repository register <NAME> --type=<TYPE> [--CODE_REPOSITORY_OPTIONS]\n```\n\n\nFor concrete options, check out the section on the `GitHubCodeRepository`, the `GitLabCodeRepository` or how to develop and register a custom code repository implementation.\n\n## \n\nAvailable implementations\n\nZenML comes with builtin implementations of the code repository abstraction for the `GitHub` and `GitLab` platforms, but it's also possible to use a custom code repository implementation.\n\n### \n\nGitHub\n\nZenML provides built-in support for using GitHub as a code repository for your ZenML pipelines. You can register a GitHub code repository by providing the URL of the GitHub instance, the owner of the repository, the name of the repository, and a GitHub Personal Access Token (PAT) with access to the repository.\n\nBefore registering the code repository, first, you have to install the corresponding integration:\n\nCopy```\nzenml integration install github\n```\n\n\nAfterward, you can register a GitHub code repository by running the following CLI command:\n\nCopy```\nzenml code-repository register <NAME> --type=github \\\n--owner=<OWNER> --repository=<REPOSITORY> \\\n--token=<GITHUB_TOKEN>\n```\n\n\nwhere `<REPOSITORY>` is the name of the code repository you are registering, `<OWNER>` is the owner of the repository, `<NAME>` is the name of the repository and `<GITHUB_TOKEN>` is your GitHub Personal Access Token.\n\nIf you're using a self-hosted GitHub Enterprise instance, you'll need to also pass the `--api_url=<API_URL>` and `--host=<HOST>` options. `<API_URL>` should point to where the GitHub API is reachable (defaults to `https://api.github.com/`) and `<HOST>` should be the hostname of your GitHub instance.\n\nPlease refer to the section on using secrets for stack configuration in order to securely store your GitHub Personal Access Token.\n\nCopy```\n# Using central secrets management\nzenml secret create github_secret \\\n  --pa_token=<GITHUB_TOKEN>\n# Then reference the username and password\nzenml code-repository register ... --token={{github_secret.pa_token}}\n  ...\n```\n\n\nAfter registering the GitHub code repository, ZenML will automatically detect if your source files are being tracked by GitHub and store the commit hash for each pipeline run.\n\nHow to get a token for GitHub\n\n  1. Go to your GitHub account settings and click on Developer settings.\n\n  2. Select \"Personal access tokens\" and click on \"Generate new token\".\n\n  3. Give your token a name and a description.\n\n  4. We recommend selecting the specific repository and then giving `contents` read-only access.\n\n  5. Click on \"Generate token\" and copy the token to a safe place.\n\n\n\n\n### \n\nGitLab\n\nZenML also provides built-in support for using GitLab as a code repository for your ZenML pipelines. You can register a GitLab code repository by providing the URL of the GitLab project, the group of the project, the name of the project, and a GitLab Personal Access Token (PAT) with access to the project.\n\nBefore registering the code repository, first, you have to install the corresponding integration:\n\nCopy```\nzenml integration install gitlab\n```\n\n\nAfterward, you can register a GitLab code repository by running the following CLI command:\n\nCopy```\nzenml code-repository register <NAME> --type=gitlab \\\n--group=<GROUP> --project=<PROJECT> \\\n--token=<GITLAB_TOKEN>\n```\n\n\nwhere `<NAME>` is the name of the code repository you are registering, `<GROUP>` is the group of the project, `<PROJECT>` is the name of the project and `<GITLAB_TOKEN>` is your GitLab Personal Access Token.\n\nIf you're using a self-hosted GitLab instance, you'll need to also pass the `--instance_url=<INSTANCE_URL>` and `--host=<HOST>` options. `<INSTANCE_URL>` should point to your GitLab instance (defaults to `https://gitlab.com/`) and `<HOST>` should be the hostname of your GitLab instance (defaults to `gitlab.com`).\n\nPlease refer to the section on using secrets for stack configuration in order to securely store your GitLab Personal Access Token.\n\nCopy```\n# Using central secrets management\nzenml secret create gitlab_secret \\\n  --pa_token=<GITLAB_TOKEN>\n# Then reference the username and password\nzenml code-repository register ... --token={{gitlab_secret.pa_token}}\n  ...\n```\n\n\nAfter registering the GitLab code repository, ZenML will automatically detect if your source files are being tracked by GitLab and store the commit hash for each pipeline run.\n\nHow to get a token for GitLab\n\n  1. Go to your GitLab account settings and click on Access Tokens.\n\n  2. Name the token and select the scopes that you need (e.g. `read_repository`, `read_user`, `read_api`)\n\n  3. Click on \"Create personal access token\" and copy the token to a safe place.\n\n\n\n\n## \n\nDeveloping a custom code repository\n\nIf you're using some other platform to store your code, and you still want to use a code repository in ZenML, you can implement and register a custom code repository.\n\nFirst, you'll need to subclass and implement the abstract methods of the `zenml.code_repositories.BaseCodeRepository` class:\n\nCopy```\nfrom abc import ABC, abstractmethod\nfrom typing import Optional\nclass BaseCodeRepository(ABC):\n  \"\"\"Base class for code repositories.\"\"\"\n  @abstractmethod\n  def login(self) -> None:\n    \"\"\"Logs into the code repository.\"\"\"\n  @abstractmethod\n  def download_files(\n      self, commit: str, directory: str, repo_sub_directory: Optional[str]\n  ) -> None:\n    \"\"\"Downloads files from the code repository to a local directory.\n    Args:\n      commit: The commit hash to download files from.\n      directory: The directory to download files to.\n      repo_sub_directory: The subdirectory in the repository to\n        download files from.\n    \"\"\"\n  @abstractmethod\n  def get_local_context(\n      self, path: str\n  ) -> Optional[\"LocalRepositoryContext\"]:\n    \"\"\"Gets a local repository context from a path.\n    Args:\n      path: The path to the local repository.\n    Returns:\n      The local repository context object.\n    \"\"\"\n```\n\n\nAfter you're finished implementing this, you can register it as follows:\n\nCopy```\n# The `CODE_REPOSITORY_OPTIONS` are key-value pairs that your implementation will receive\n# as configuration in its __init__ method. This will usually include stuff like the username\n# and other credentials necessary to authenticate with the code repository platform.\nzenml code-repository register <NAME> --type=custom --source=my_module.MyRepositoryClass \\\n  [--CODE_REPOSITORY_OPTIONS]\n```\n\n\nPreviousContainerizationNextSecrets\n\nLast updated 5 months ago\n\nWas this helpful?\n",
    "summary": "## TL;DR Summary of Code Repositories in ZenML\n\n### Overview\nA **code repository** in ZenML is a remote storage location for code, enhancing reproducibility and development efficiency in machine learning workflows by tracking code versions and optimizing Docker image builds.\n\n### Key Concepts\n- **Reproducibility**: Tracks specific code versions (commit hashes) for each pipeline run.\n- **Efficiency**: Avoids unnecessary Docker builds by downloading code at runtime instead of including it in each build.\n\n### Registering a Code Repository\n1. **Install Integration**: \n   ```bash\n   zenml integration install <INTEGRATION_NAME>\n   ```\n2. **Register via CLI**:\n   ```bash\n   zenml code-repository register <NAME> --type=<TYPE> [--CODE_REPOSITORY_OPTIONS]\n   ```\n\n### Available Implementations\n- **GitHub**: Requires a Personal Access Token (PAT) for registration.\n- **GitLab**: Similar to GitHub, also requires a PAT.\n\n### Custom Code Repository\n- Implement `BaseCodeRepository` and register using:\n   ```bash\n   zenml code-repository register <NAME> --type=custom --source=my_module.MyRepositoryClass [--CODE_REPOSITORY_OPTIONS]\n   ```\n\n### Conclusion\nIntegrating code repositories in ZenML streamlines machine learning workflows, ensuring efficient code management and reproducibility.",
    "content_quality_score": null,
    "child_urls": [
        "https://docs.zenml.io/",
        "https://zenml.io",
        "https://zenml.io/slack",
        "https://cloud.zenml.io/signup",
        "https://docs.zenml.io/user-guides",
        "https://docs.zenml.io/pro",
        "https://docs.zenml.io/stacks",
        "https://docs.zenml.io/api-reference",
        "https://docs.zenml.io/sdk-reference",
        "https://docs.zenml.io/changelog",
        "https://docs.zenml.io/getting-started/installation",
        "https://docs.zenml.io/getting-started/hello-world",
        "https://docs.zenml.io/getting-started/your-first-ai-pipeline",
        "https://docs.zenml.io/getting-started/core-concepts",
        "https://docs.zenml.io/getting-started/system-architectures",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml",
        "https://docs.zenml.io/deploying-zenml/connecting-to-zenml",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server",
        "https://docs.zenml.io/concepts/steps_and_pipelines",
        "https://docs.zenml.io/concepts/artifacts",
        "https://docs.zenml.io/concepts/stack_components",
        "https://docs.zenml.io/concepts/service_connectors",
        "https://docs.zenml.io/concepts/snapshots",
        "https://docs.zenml.io/concepts/deployment",
        "https://docs.zenml.io/concepts/containerization",
        "https://docs.zenml.io/concepts/code-repositories",
        "https://docs.zenml.io/concepts/secrets",
        "https://docs.zenml.io/concepts/environment-variables",
        "https://docs.zenml.io/concepts/tags",
        "https://docs.zenml.io/concepts/metadata",
        "https://docs.zenml.io/concepts/models",
        "https://docs.zenml.io/concepts/dashboard-features",
        "https://docs.zenml.io/concepts/templates",
        "https://docs.zenml.io/reference/community-and-content",
        "https://docs.zenml.io/reference/environment-variables",
        "https://docs.zenml.io/reference/llms-txt",
        "https://docs.zenml.io/reference/faq",
        "https://docs.zenml.io/reference/global-settings",
        "https://docs.zenml.io/reference/legacy-docs",
        "https://docs.zenml.io/concepts/code-repositories#registering-a-code-repository",
        "https://docs.zenml.io/concepts/code-repositories#available-implementations",
        "https://docs.zenml.io/concepts/code-repositories#github",
        "https://docs.zenml.io/concepts/code-repositories#gitlab",
        "https://docs.zenml.io/concepts/code-repositories#developing-a-custom-code-repository",
        "https://docs.zenml.io/concepts",
        "https://docs.zenml.io/how-to/customize-docker-builds/how-to-reuse-builds",
        "https://docs.zenml.io/concepts/code-repositories#how-to-get-a-token-for-github",
        "https://docs.zenml.io/concepts/code-repositories#how-to-get-a-token-for-gitlab",
        "https://github.com/zenml-io/zenml",
        "https://www.gitbook.com/?utm_source=content&utm_medium=trademark&utm_campaign=5aBlTJNbVDkrxJp7J1J9",
        "https://github.com/",
        "https://gitlab.com/",
        "https://docs.github.com/en/enterprise-server@3.10/admin/configuring-settings/configuring-network-settings/configuring-the-hostname-for-your-instance?learn=deploy_an_instance&learnProduct=admin",
        "https://github.com/settings/tokens?type=beta"
    ]
}