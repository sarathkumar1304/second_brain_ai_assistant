{
    "id": "3d7acc323e5d8a0ea38ee1c7333def47",
    "metadata": {
        "id": "3d7acc323e5d8a0ea38ee1c7333def47",
        "url": "https://docs.zenml.io/deploying-zenml/deploying-zenml/deploy-with-custom-image",
        "title": "Deploy with custom images | ZenML - Bridging the gap between ML & Ops",
        "properties": {
            "description": "Deploying ZenML with custom Docker images.",
            "keywords": null,
            "author": null,
            "og:title": "Deploy with custom images | ZenML - Bridging the gap between ML & Ops",
            "og:description": "Deploying ZenML with custom Docker images.",
            "og:image": "https://docs.zenml.io/~gitbook/ogimage/yf1EjsDJanSALcs9kEdl",
            "twitter:card": "summary_large_image",
            "twitter:title": "Deploy with custom images | ZenML - Bridging the gap between ML & Ops",
            "twitter:description": "Deploying ZenML with custom Docker images.",
            "twitter:image": "https://docs.zenml.io/~gitbook/ogimage/yf1EjsDJanSALcs9kEdl"
        }
    },
    "content": "`Ctrl``k`\n\nGitBook AssistantAsk\n\nProductResourcesGitHubStart free\n\nMore\n\n  * Documentation\n  * Learn\n  * ZenML Pro\n  * Stacks\n  * API Reference\n  * SDK Reference\n  * Changelog\n\n\n\nGitBook Assistant\n\nGitBook Assistant\n\nWorking...Thinking...\n\nGitBook Assistant\n\n##### Good evening\n\nI'm here to help you with the docs.\n\nWhat is this page about?What should I read next?Can you give an example?\n\n`Ctrl``i`\n\nAI Based on your context\n\nSend\n\n  * Getting Started\n\n    * Welcome to ZenML\n    * Installation\n    * Hello World\n    * Your First AI Pipeline\n    * Core Concepts\n    * System Architecture\n  * Deploying ZenML\n\n    * Deploy\n\n      * Deploy with Docker\n      * Deploy with Helm\n      * Deploy using HuggingFace Spaces\n      * Deploy with custom images\n      * Secret management\n      * Custom secret stores\n\n    * Connect\n    * Manage\n  * Concepts\n\n    * Steps & Pipelines\n    * Artifacts\n    * Stack & Components\n    * Service Connectors\n    * Pipeline Snapshots\n    * Pipeline Deployments\n    * Containerization\n    * Code Repositories\n    * Secrets\n    * Environment Variables\n    * Tags\n    * Metadata\n    * Models\n    * Dashboard\n    * Templates\n  * Reference\n\n    * Community & content\n    * Environment Variables\n    * MCP Docs & llms.txt\n    * FAQ\n    * Global settings\n    * Legacy docs\n\n\n\nPowered by GitBook\n\nOn this page\n\n  * Build and Push Custom ZenML Server Docker Image\n  * Deploy ZenML with your custom image\n\n\n\nWas this helpful?\n\nGitBook AssistantAsk\n\n  1. Deploying ZenML\n  2. Deploy\n\n\n\n# Deploy with custom images\n\nDeploying ZenML with custom Docker images.\n\nIn most cases, deploying ZenML with the default `zenmlhub/zenml-server` Docker image should work just fine. However, there are some scenarios when you might need to deploy ZenML with a custom Docker image:\n\n  * You have implemented a custom artifact store for which you want to enable artifact visualizations or step logs in your dashboard.\n\n  * You have forked the ZenML repository and want to deploy a ZenML server based on your own fork because you made changes to the server / database logic.\n\n\n\n\nDeploying ZenML with custom Docker images is only possible for Docker or Helm deployments.\n\n### \n\nBuild and Push Custom ZenML Server Docker Image\n\nHere is how you can build a custom ZenML server Docker image:\n\n  1. Set up a container registry of your choice. E.g., as an indivial developer you could create a free Docker Hub account and then set up a free Docker Hub repository.\n\n  2. Clone ZenML (or your ZenML fork) and checkout the branch that you want to deploy, e.g., if you want to deploy ZenML version 0.41.0, run\n\nCopy```\ngitcheckoutrelease/0.41.0\n```\n\n\n  3. Copy the ZenML base.Dockerfile, e.g.:\n\nCopy```\ncpdocker/base.Dockerfiledocker/custom.Dockerfile\n```\n\n\n  4. Modify the copied Dockerfile:\n\n     * Add additional dependencies:\n\nCopy```\nRUNpipinstall<my_package>\n```\n\n\n     * (Forks only) install local files instead of official ZenML:\n\nCopy```\nRUNpipinstall-e.[server,secrets-aws,secrets-gcp,secrets-azure,secrets-hashicorp,s3fs,gcsfs,adlfs,connectors-aws,connectors-gcp,connectors-azure]\n```\n\n\n  5. Build and push an image based on your Dockerfile:\n\nCopy```\ndockerbuild-fdocker/custom.Dockerfile.-t<YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>:<IMAGE_TAG>--platformlinux/amd64\ndockerpush<YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>:<IMAGE_TAG>\n```\n\n\n\n\n\nIf you want to verify your custom image locally, you can follow the Deploy a custom ZenML image via Docker section below to deploy the ZenML server locally first.\n\n### \n\nDeploy ZenML with your custom image\n\nNext, adjust your preferred deployment strategy to use the custom Docker image you just built.\n\n#### \n\nDeploy a custom ZenML image via Docker\n\nTo deploy your custom image via Docker, first familiarize yourself with the general ZenML Docker Deployment Guide.\n\nTo use your own image, follow the general guide step by step but replace all mentions of `zenmldocker/zenml-server` with your custom image reference `<YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>:<IMAGE_TAG>`. E.g.:\n\n  * To run the ZenML server with Docker based on your custom image, do\n\n\n\n\nCopy```\ndocker run -it -d -p 8080:8080 --name zenml <YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>:<IMAGE_TAG>\n```\n\n\n  * To use `docker-compose`, adjust your `docker-compose.yml`:\n\n\n\n\nCopy```\nservices:\n zenml:\n  image: <YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>:<IMAGE_TAG>\n```\n\n\n#### \n\nDeploy a custom ZenML image via Helm\n\nTo deploy your custom image via Helm, first familiarize yourself with the general ZenML Helm Deployment Guide.\n\nTo use your own image, the only thing you need to do differently is to modify the `image` section of your `values.yaml` file:\n\nCopy```\nzenml:\n image:\n  repository: <YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>\n  tag: <IMAGE_TAG>\n```\n\n\nPreviousDeploy using HuggingFace SpacesNextSecret management\n\nLast updated 8 months ago\n\nWas this helpful?\n",
    "summary": "## TL;DR Summary of ZenML Custom Image Deployment\n\n### Deploy with Custom Images\n- **Purpose**: Deploy ZenML using custom Docker images when:\n  - Implementing a custom artifact store for visualizations.\n  - Forking ZenML to modify server/database logic.\n- **Deployment Options**: Custom images can be used with Docker or Helm.\n\n### Build and Push Custom ZenML Server Docker Image\n1. **Set Up Container Registry**: Create a Docker Hub account for individual developers.\n2. **Clone ZenML**: Checkout the desired branch (e.g., `git checkout release/0.41.0`).\n3. **Copy Dockerfile**: `cp docker/base.Dockerfile docker/custom.Dockerfile`.\n4. **Modify Dockerfile**:\n   - Add dependencies: `RUN pip install <my_package>`.\n   - For forks, install local files instead of official ZenML.\n5. **Build and Push**:\n   - Build: `docker build -f docker/custom.Dockerfile -t <YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>:<IMAGE_TAG> --platform linux/amd64`.\n   - Push: `docker push <YOUR_CONTAINER_REGISTRY>/<IMAGE_NAME>:<IMAGE_TAG>`.\n\n### Deploy ZenML with Custom Image\n- **Docker Deployment**: Replace `zenmlhub/zenml-server` with your custom image in the deployment commands.\n- **Helm Deployment**: Modify the `image` section in `values.yaml` to use your custom image.\n\nThis guide provides essential steps for deploying ZenML with custom Docker images effectively.",
    "content_quality_score": null,
    "child_urls": [
        "https://docs.zenml.io/",
        "https://zenml.io",
        "https://zenml.io/slack",
        "https://cloud.zenml.io/signup",
        "https://docs.zenml.io/user-guides",
        "https://docs.zenml.io/pro",
        "https://docs.zenml.io/stacks",
        "https://docs.zenml.io/api-reference",
        "https://docs.zenml.io/sdk-reference",
        "https://docs.zenml.io/changelog",
        "https://docs.zenml.io/getting-started/installation",
        "https://docs.zenml.io/getting-started/hello-world",
        "https://docs.zenml.io/getting-started/your-first-ai-pipeline",
        "https://docs.zenml.io/getting-started/core-concepts",
        "https://docs.zenml.io/getting-started/system-architectures",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/deploy-with-docker",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/deploy-with-helm",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/deploy-using-huggingface-spaces",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/deploy-with-custom-image",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/secret-management",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/custom-secret-stores",
        "https://docs.zenml.io/deploying-zenml/connecting-to-zenml",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server",
        "https://docs.zenml.io/concepts/steps_and_pipelines",
        "https://docs.zenml.io/concepts/artifacts",
        "https://docs.zenml.io/concepts/stack_components",
        "https://docs.zenml.io/concepts/service_connectors",
        "https://docs.zenml.io/concepts/snapshots",
        "https://docs.zenml.io/concepts/deployment",
        "https://docs.zenml.io/concepts/containerization",
        "https://docs.zenml.io/concepts/code-repositories",
        "https://docs.zenml.io/concepts/secrets",
        "https://docs.zenml.io/concepts/environment-variables",
        "https://docs.zenml.io/concepts/tags",
        "https://docs.zenml.io/concepts/metadata",
        "https://docs.zenml.io/concepts/models",
        "https://docs.zenml.io/concepts/dashboard-features",
        "https://docs.zenml.io/concepts/templates",
        "https://docs.zenml.io/reference/community-and-content",
        "https://docs.zenml.io/reference/environment-variables",
        "https://docs.zenml.io/reference/llms-txt",
        "https://docs.zenml.io/reference/faq",
        "https://docs.zenml.io/reference/global-settings",
        "https://docs.zenml.io/reference/legacy-docs",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/deploy-with-custom-image#build-and-push-custom-zenml-server-docker-image",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/deploy-with-custom-image#deploy-zenml-with-your-custom-image",
        "https://docs.zenml.io/deploying-zenml",
        "https://docs.zenml.io/concepts/artifacts/visualizations",
        "https://docs.zenml.io/concepts/steps_and_pipelines/logging",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/deploy-with-custom-image#deploy-a-custom-zenml-image-via-docker",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml/deploy-with-custom-image#deploy-a-custom-zenml-image-via-helm",
        "https://github.com/zenml-io/zenml",
        "https://www.gitbook.com/?utm_source=content&utm_medium=trademark&utm_campaign=5aBlTJNbVDkrxJp7J1J9",
        "https://hub.docker.com/",
        "https://github.com/zenml-io/zenml/blob/main/docker/base.Dockerfile"
    ]
}