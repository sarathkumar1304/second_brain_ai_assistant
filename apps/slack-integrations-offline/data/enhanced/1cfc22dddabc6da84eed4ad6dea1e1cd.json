{
    "id": "1cfc22dddabc6da84eed4ad6dea1e1cd",
    "metadata": {
        "id": "1cfc22dddabc6da84eed4ad6dea1e1cd",
        "url": "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty",
        "title": "Migration guide 0.58.2 â†’ 0.60.0 | ZenML - Bridging the gap between ML & Ops",
        "properties": {
            "description": "How to migrate from ZenML 0.58.2 to 0.60.0 (Pydantic 2 edition).",
            "keywords": null,
            "author": null,
            "og:title": "Migration guide 0.58.2 â†’ 0.60.0 | ZenML - Bridging the gap between ML & Ops",
            "og:description": "How to migrate from ZenML 0.58.2 to 0.60.0 (Pydantic 2 edition).",
            "og:image": "https://docs.zenml.io/~gitbook/ogimage/fcUOZ3bnhwoDcCGL8xHc",
            "twitter:card": "summary_large_image",
            "twitter:title": "Migration guide 0.58.2 â†’ 0.60.0 | ZenML - Bridging the gap between ML & Ops",
            "twitter:description": "How to migrate from ZenML 0.58.2 to 0.60.0 (Pydantic 2 edition).",
            "twitter:image": "https://docs.zenml.io/~gitbook/ogimage/fcUOZ3bnhwoDcCGL8xHc"
        }
    },
    "content": "`Ctrl``k`\n\nGitBook AssistantAsk\n\nProductResourcesGitHubStart free\n\nMore\n\n  * Documentation\n  * Learn\n  * ZenML Pro\n  * Stacks\n  * API Reference\n  * SDK Reference\n  * Changelog\n\n\n\nGitBook Assistant\n\nGitBook Assistant\n\nWorking...Thinking...\n\nGitBook Assistant\n\n##### Good evening\n\nI'm here to help you with the docs.\n\nWhat is this page about?What should I read next?Can you give an example?\n\n`Ctrl``i`\n\nAI Based on your context\n\nSend\n\n  * Getting Started\n\n    * Welcome to ZenML\n    * Installation\n    * Hello World\n    * Your First AI Pipeline\n    * Core Concepts\n    * System Architecture\n  * Deploying ZenML\n\n    * Deploy\n    * Connect\n    * Manage\n\n      * Best practices for upgrading\n      * Using ZenML server in production\n      * Troubleshoot your ZenML server\n      * Migration guide\n\n        * Migration guide 0.13.2 â†’ 0.20.0\n        * Migration guide 0.23.0 â†’ 0.30.0\n        * Migration guide 0.39.1 â†’ 0.41.0\n        * Migration guide 0.58.2 â†’ 0.60.0\n\n  * Concepts\n\n    * Steps & Pipelines\n    * Artifacts\n    * Stack & Components\n    * Service Connectors\n    * Pipeline Snapshots\n    * Pipeline Deployments\n    * Containerization\n    * Code Repositories\n    * Secrets\n    * Environment Variables\n    * Tags\n    * Metadata\n    * Models\n    * Dashboard\n    * Templates\n  * Reference\n\n    * Community & content\n    * Environment Variables\n    * MCP Docs & llms.txt\n    * FAQ\n    * Global settings\n    * Legacy docs\n\n\n\nPowered by GitBook\n\nOn this page\n\n  * Changes in some of the critical dependencies\n  * Changes in pydantic\n  * Changes in our integrations changes\n  * Airflow\n  * AWS\n  * Evidently\n  * Feast\n  * GCP\n  * Great Expectations\n  * Kubeflow\n  * MLflow\n  * Label Studio\n  * Skypilot\n  * Tensorflow\n  * Tekton\n\n\n\nWas this helpful?\n\nGitBook AssistantAsk\n\n  1. Deploying ZenML\n  2. Manage\n  3. Migration guide\n\n\n\n# Migration guide 0.58.2 â†’ 0.60.0\n\nHow to migrate from ZenML 0.58.2 to 0.60.0 (Pydantic 2 edition).\n\nZenML now uses Pydantic v2. ðŸ¥³\n\nThis upgrade comes with a set of critical updates. While your user experience mostly remains unaffected, you might see unexpected behavior due to the changes in our dependencies. Moreover, since Pydantic v2 provides a slightly stricter validation process, you might end up bumping into some validation errors which was not caught before, but it is all for the better ðŸ™‚ If you run into any other errors, please let us know either on GitHub or on our Slack.\n\n## \n\nChanges in some of the critical dependencies\n\n  * SQLModel is one of the core dependencies of ZenML and prior to this upgrade, we were utilizing version `0.0.8`. However, this version is relatively outdated and incompatible with Pydantic v2. Within the scope of this upgrade, we upgraded it to `0.0.18`.\n\n  * Due to the change in the SQLModel version, we also had to upgrade our SQLAlchemy dependency from V1 to v2. While this does not affect the way that you are using ZenML, if you are using SQLAlchemy in your environment, you might have to migrate your code as well. For a detailed list of changes, feel free to check their migration guide.\n\n\n\n\n## \n\nChanges in `pydantic`\n\nPydantic v2 brings a lot of new and exciting changes to the table. The core logic now uses Rust and it is much faster and more efficient in terms of performance. On top of it, the main concepts like model design, configuration, validation, or serialization now include a lot of new cool features. If you are using `pydantic` in your workflow and are interested in the new changes, you can check the brilliant migration guide provided by the `pydantic` team to see the full list of changes.\n\n## \n\nChanges in our integrations changes\n\nMuch like ZenML, `pydantic` is an important dependency in many other Python packages. Thatâ€™s why conducting this upgrade helped us unlock a new version for several ZenML integration dependencies. Additionally, in some instances, we had to adapt the functionality of the integration to keep it compatible with `pydantic`. So, if you are using any of these integrations, please go through the changes.\n\n### \n\nAirflow\n\nAs mentioned above upgrading our `pydantic` dependency meant we had to upgrade our `sqlmodel` dependency. Upgrading our `sqlmodel` dependency meant we had to upgrade our `sqlalchemy` dependency as well. Unfortunately, `apache-airflow` is still using `sqlalchemy` v1 and is incompatible with pydantic v2. As a solution, we have removed the dependencies of the `airflow` integration. Now, you can use ZenML to create your Airflow pipelines and use a separate environment to run them with Airflow. You can check the updated docs right here.\n\n### \n\nAWS\n\nSome of our integrations now require `protobuf` 4. Since our previous `sagemaker` version (`2.117.0`) did not support `protobof` 4, we could not pair it with these new integrations. Thankfully `sagemaker` started supporting `protobuf` 4 with version `2.172.0` and relaxing its dependency solved the compatibility issue.\n\n### \n\nEvidently\n\nThe old version of our `evidently` integration was not compatible with Pydantic v2. They started supporting it starting from version `0.4.16`. As their latest version is `0.4.22`, the new dependency of the integration is limited between these two versions.\n\n### \n\nFeast\n\nOur previous implementation of the `feast` integration was not compatible with Pydantic v2 due to the extra `redis` dependency we were using. This extra dependency is now removed and the `feast` integration is working as intended.\n\n### \n\nGCP\n\nThe previous version of the Kubeflow dependency (`kfp==1.8.22`) in our GCP integration required Pydantic V1 to be installed. While we were upgrading our Pydantic dependency, we saw this as an opportunity and wanted to use this chance to upgrade the `kfp` dependency to v2 (which has no dependencies on the Pydantic library). This is why you may see some functional changes in the vertex step operator and orchestrator. If you would like to go through the changes in the `kfp` library, you can find the migration guide here.\n\n### \n\nGreat Expectations\n\nGreat Expectations started supporting Pydantic v2 starting from version `0.17.15` and they are closing in on their `1.0` release. Since this release might include a lot of big changes, we adjusted the dependency in our integration to `great-expectations>=0.17.15,<1.0`. We will try to keep it updated in the future once they release the `1.0` version\n\n### \n\nKubeflow\n\nSimilar to the GCP integration, the previous version of the kubeflow dependency (`kfp==1.8.22`) in our `kubeflow` integration required Pydantic V1 to be installed. While we were upgrading our Pydantic dependency, we saw this as an opportunity and wanted to use this chance to upgrade the `kfp` dependency to v2 (which has no dependencies on the Pydantic library). If you would like to go through the changes in the `kfp` library, you can find the migration guide here. ( We also are considering adding an alternative version of this integration so our users can keep using `kfp` V1 in their environment. Stay tuned for any updates.)\n\n### \n\nMLflow\n\n`mlflow` is compatible with both Pydantic V1 and v2. However, due to a known issue, if you install `zenml` first and then do `zenml integration install mlflow -y`, it downgrades `pydantic` to V1. This is why we manually added the same duplicated `pydantic` requirement in the integration definition as well. Keep in mind that the `mlflow` library is still using some features of `pydantic` V1 which are deprecated. So, if the integration is installed in your environment, you might run into some deprecation warnings.\n\n### \n\nLabel Studio\n\nWhile we were working on updating our `pydantic` dependency, the `label-studio-sdk` has released its 1.0 version. In this new version, `pydantic` v2 is also supported. The implementation and documentation of our Label Studio integration have been updated accordingly.\n\n### \n\nSkypilot\n\nWith the switch to `pydantic` v2, the implementation of our `skypilot` integration mostly remained untouched. However, due to an incompatibility between the new version `pydantic` and the `azurecli`, the `skypilot[azure]` flavor can not be installed at the same time, thus our `skypilot_azure` integration is currently deactivated. We are working on fixing this issue and if you are using this integration in your workflows, we recommend staying on the previous version of ZenML until we can solve this issue.\n\n### \n\nTensorflow\n\nThe new version of `pydantic` creates a drift between `tensorflow` and `typing_extensions` packages and relaxing the dependencies here resolves the issue. At the same time, the upgrade to `kfp` v2 (in integrations like `kubeflow`, `tekton`, or `gcp`) bumps our `protobuf` dependency from `3.X` to `4.X`. To stay compatible with this requirement, the installed version of `tensorflow` needs to be `>=2.12.0`. While this change solves the dependency issues in most settings, we have bumped into some errors while using `tensorflow` 2.12.0 on Python 3.8 on Ubuntu. If you would like to use this integration, please consider using a higher Python version.\n\n### \n\nTekton\n\nSimilar to the `gcp` and `kubeflow` integrations, the old version of our `tekton` integration was not compatible with `pydantic` V1 due to its `kfp` dependency. With the switch from `kfp` V1 to v2, we have adapted our implementation to use the new version of `kfp` library and updated our documentation accordingly.\n\nDue to all aforementioned changes, when you upgrade ZenML to 0.60.0, you might run into some dependency issues, especially if you were previously using an integration which was not supporting Pydantic v2 before. In such cases, we highly recommend setting up a fresh Python environment.\n\nPreviousMigration guide 0.39.1 â†’ 0.41.0NextSteps & Pipelines\n\nLast updated 9 months ago\n\nWas this helpful?\n",
    "summary": "## TL;DR Summary of ZenML Migration Guide 0.58.2 â†’ 0.60.0\n\n### Overview\nThis migration guide details the transition from ZenML version 0.58.2 to 0.60.0, which incorporates Pydantic v2, enhancing performance and validation processes.\n\n### Key Changes\n- **Critical Dependencies**: \n  - Upgraded SQLModel from `0.0.8` to `0.0.18`, necessitating SQLAlchemy upgrade to v2.\n  \n- **Pydantic Updates**: \n  - Pydantic v2 introduces Rust-based core logic, improving speed and efficiency.\n\n### Integration Changes\n- **Airflow**: Removed dependencies due to incompatibility with SQLAlchemy v2.\n- **AWS**: Updated SageMaker to support `protobuf` 4.\n- **Evidently**: Updated to version `0.4.22` for Pydantic v2 compatibility.\n- **GCP & Kubeflow**: Upgraded `kfp` dependency to v2, removing Pydantic v1 requirements.\n- **MLflow**: Compatibility with both Pydantic versions, but may cause deprecation warnings.\n- **TensorFlow**: Requires version `>=2.12.0` due to dependency adjustments.\n\n### Recommendations\nFor a smooth upgrade, consider setting up a fresh Python environment to avoid dependency conflicts.",
    "content_quality_score": null,
    "child_urls": [
        "https://docs.zenml.io/",
        "https://zenml.io",
        "https://zenml.io/slack",
        "https://cloud.zenml.io/signup",
        "https://docs.zenml.io/user-guides",
        "https://docs.zenml.io/pro",
        "https://docs.zenml.io/stacks",
        "https://docs.zenml.io/api-reference",
        "https://docs.zenml.io/sdk-reference",
        "https://docs.zenml.io/changelog",
        "https://docs.zenml.io/getting-started/installation",
        "https://docs.zenml.io/getting-started/hello-world",
        "https://docs.zenml.io/getting-started/your-first-ai-pipeline",
        "https://docs.zenml.io/getting-started/core-concepts",
        "https://docs.zenml.io/getting-started/system-architectures",
        "https://docs.zenml.io/deploying-zenml/deploying-zenml",
        "https://docs.zenml.io/deploying-zenml/connecting-to-zenml",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/best-practices-upgrading-zenml",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/using-zenml-server-in-prod",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/troubleshoot-your-deployed-server",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-twenty",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-thirty",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-forty",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty",
        "https://docs.zenml.io/concepts/steps_and_pipelines",
        "https://docs.zenml.io/concepts/artifacts",
        "https://docs.zenml.io/concepts/stack_components",
        "https://docs.zenml.io/concepts/service_connectors",
        "https://docs.zenml.io/concepts/snapshots",
        "https://docs.zenml.io/concepts/deployment",
        "https://docs.zenml.io/concepts/containerization",
        "https://docs.zenml.io/concepts/code-repositories",
        "https://docs.zenml.io/concepts/secrets",
        "https://docs.zenml.io/concepts/environment-variables",
        "https://docs.zenml.io/concepts/tags",
        "https://docs.zenml.io/concepts/metadata",
        "https://docs.zenml.io/concepts/models",
        "https://docs.zenml.io/concepts/dashboard-features",
        "https://docs.zenml.io/concepts/templates",
        "https://docs.zenml.io/reference/community-and-content",
        "https://docs.zenml.io/reference/environment-variables",
        "https://docs.zenml.io/reference/llms-txt",
        "https://docs.zenml.io/reference/faq",
        "https://docs.zenml.io/reference/global-settings",
        "https://docs.zenml.io/reference/legacy-docs",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#changes-in-some-of-the-critical-dependencies",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#changes-in-pydantic",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#changes-in-our-integrations-changes",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#airflow",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#aws",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#evidently",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#feast",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#gcp",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#great-expectations",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#kubeflow",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#mlflow",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#label-studio",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#skypilot",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#tensorflow",
        "https://docs.zenml.io/deploying-zenml/upgrade-zenml-server/migration-guide/migration-zero-sixty#tekton",
        "https://docs.zenml.io/deploying-zenml",
        "https://zenml.io/slack-invite",
        "https://docs.zenml.io/stacks/orchestrators/airflow",
        "https://github.com/zenml-io/zenml",
        "https://www.gitbook.com/?utm_source=content&utm_medium=trademark&utm_campaign=5aBlTJNbVDkrxJp7J1J9",
        "https://docs.sqlalchemy.org/en/20/changelog/migration_20.html",
        "https://docs.pydantic.dev/2.7/migration/",
        "https://www.kubeflow.org/docs/components/pipelines/v2/migration/"
    ]
}